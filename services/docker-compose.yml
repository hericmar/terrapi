version: '3'

services:
  broker:
    build: broker
    image: terrapi_broker
    container_name: terrapi_broker
    volumes:
      - ${PWD}/broker/mosquitto.conf:/etc/mosquitto/mosquitto.conf:ro
    ports:
      - "1884:1884"
    environment:
      - BROKER_PASSWORD
  web:
    build: web
    image: terrapi_web
    container_name: terrapi_web

volumes:
  mosquitto.conf:
